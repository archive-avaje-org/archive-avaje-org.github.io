<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict //EN">
<html>
<head>
<title>Topic: When make Paging query the connection is not closed & How to configure the JNDI of Tomcat? </title>
<link rel="shortcut icon" href="/image/favicon.ico" >
<link rel="stylesheet" type="text/css" href="/static/v2style.css" >
<!--
<link rel="stylesheet" type="text/css" href="/css/100/basestyle|syntaxhighlighter" >
-->

<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="/doc/ie.css" media="screen">
<![endif]-->


<meta name="Author" content="zhoupeng">
<meta name="description" content="Exception Info 2010 3 16 21 16 32 com avaje ebean server lib sql DataSourcePool createConnection DataSourcePool ora grow pool busy 1 size 1 max 10 select count from WF PROCESSDEFINITION f 3 2010 3 16 21 16 32 com avaje ebean server lib sql DataSourcePool createConnection DataSourcePool ora grow pool busy 2 size 2 max 10 select count from WF PROCESSDEFINITION f 3 2010 3 16 21 16 32 com avaje ebean server lib sql DataSourcePool createConnection DataSourcePool ora grow pool busy 3 size 3 max 10 select count from WF PROCESSDEFINITION f 3 2010 3 16 21 16 32 com avaje ebean server lib sql DataSourcePool createConnection DataSourcePool ora grow pool busy 4 size 4 max 10 select count from WF PROCESSDEFINITION f 3 2010 3 16 21 16 32 com avaje ebean server lib sql DataSourcePool createConnection Dat">

<script type="text/javascript" src="/doc/jslib.js" ></script>
<!--
<script type="text/javascript" src="/jsl/jquery|jquery.corner|mygoo|app|shCore|shBrushJava|shBrushProperty|shBrushSql" ></script>
-->

<script type="text/javascript">
 $(document).ready(function(){
	$(".topic").corner("12px");
	$("a.action").corner("8px hover");
	$("div.example").corner("5px");
	$(".reqrlogin").hide();

	//dp.SyntaxHighlighter.ClipboardSwf = '/flash/clipboard.swf';
	dp.SyntaxHighlighter.HighlightAll('code');

 });
</script>

<!-- component('cn=app.comp.LoginEnable') -->





</head>

<body>
<form action='/topic-177.html' method="post" id="GLOBAL_ACTION">
<input type='hidden' name='_WOGA_CONTROLLER' >
<input type='hidden' name='_WOGA_METHOD' >
<input type='hidden' name='_WOGA_PARAM' >
<input type='hidden' name='_WOGA_RENDER' >
<a id="top"></a>
<div id="headwrap">
<div id="headmax">
<div id="menuuser">
<!-- component('cn=app.comp.UserStatus') -->
</div>
<img id="logo" src="/image/logo-avaje.gif" width="127" height="50" alt="avaje logo">
<div style="clear:both;"></div>
</div>
</div><!-- end of headwrap -->

<div id="head2wrap">
<div id="head2max">
<table summary="layout">
<tr>
<td align="center">
<div id="menutab" style="">
<a id="m0" href="/" class="popmenu"><span>home</span></a>
<a id="m1" href="/ebean/documentation.html" class="popmenu"><span>documentation</span></a>
<a id="m4" href="/download.html" class="popmenu"><span>downloads</span></a>
<a id="m6" href="http://groups.google.com/group/ebean" class="popmenu"><span>google group</span></a>
<a id="m2" href="/forum.html" class="popmenu"><span>forums<img src="/image/menuDownH6_3.gif" width="11" height="11" alt=""></span></a>
<a id="m3" href="/bug.html" class="popmenu"><span>bugs<img src="/image/menuDownH6_3.gif" width="11" height="11" alt=""></span></a>
<a id="m5" href="/feedback.html" class="popmenu"><span>feedback</span></a>
</div>
</td>
</tr>
</table>
</div>
</div>

<div id="bodywrap">
<div id="bodymax">
<div id="content">
<div id="pageBody">
<div id="breadcrumb">
&nbsp;
</div>






<div class="breadcrumb">
<img src="/image/smallhome.gif"> <a href="index.html">Home</a> &raquo; <a href="forum.html">Forum</a> &raquo; <a href="forumdetail-3.html">Byte code enhancement</a>
</div>

<h1>
Please use the google group to ask questions - thanks.
</h1>

<div id="app.comp.Topic">

<div class="pageactions">
<!-- 
<input type="button" class="btn requser"  value="Reply" onclick="topicReply();">
<input type="button" class="btn requser"  value="New Topic" onclick="gotoURL('topicnew-3.html');">
-->
</div>


<div class="topiccontent">

<div class="topic">
<div class="rhs" style="float:right">
<span>by zhoupeng </span>
16 Mar&nbsp;14:47
</div>
When make Paging query the connection is not closed & How to configure the JNDI of Tomcat? 
<div class="body">
<p>Exception Info:</p><p>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[1] size[1] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[2] size[2] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[3] size[3] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[4] size[4] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[5] size[5] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[6] size[6] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[7] size[7] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[8] size[8] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>3<br/>2010-3-16 21:16:32 com.avaje.ebean.server.lib.sql.DataSourcePool createConnection<br/>???????????: DataSourcePool [ora] grow pool; busy[9] size[9] max[10]<br/>select count(*) from WF_PROCESSDEFINITION f<br/>???????????: Busy Connections:</p><p>Exception in thread "main" javax.persistence.PersistenceException: javax.persistence.PersistenceException: java.sql.SQLException: Unsuccessfully waited for a connection to be returned. No connections are free. You need to Increase the max connections or look for a connection pool leak.<br/>at com.avaje.ebean.server.query.LimitOffsetPagingQuery.getTotalRowCount(LimitOffsetPagingQuery.java:151)<br/>at com.ninemax.animation.persistence.template.EbeanSupport.main(EbeanSupport.java:78)<br/>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br/>at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)<br/>at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)<br/>at java.lang.reflect.Method.invoke(Method.java:597)<br/>at com.intellij.rt.execution.application.AppMain.main(AppMain.java:110)<br/>Caused by: javax.persistence.PersistenceException: java.sql.SQLException: Unsuccessfully waited for a connection to be returned. No connections are free. You need to Increase the max connections or look for a connection pool leak.<br/>at com.avaje.ebean.server.transaction.TransactionManager.createTransaction(TransactionManager.java:356)<br/>at com.avaje.ebean.server.core.DefaultServer.createTransaction(DefaultServer.java:635)<br/>at com.avaje.ebean.server.core.DefaultServer.findFutureRowCount(DefaultServer.java:1246)<br/>at com.avaje.ebean.server.query.LimitOffsetPagingQuery.getFutureRowCount(LimitOffsetPagingQuery.java:80)<br/>at com.avaje.ebean.server.query.LimitOffsetPagingQuery.getTotalRowCount(LimitOffsetPagingQuery.java:149)<br/>... 6 more<br/>Caused by: java.sql.SQLException: Unsuccessfully waited for a connection to be returned. No connections are free. You need to Increase the max connections or look for a connection pool leak.<br/>at com.avaje.ebean.server.lib.sql.DataSourcePool._getPooledConnection(DataSourcePool.java:818)<br/>at com.avaje.ebean.server.lib.sql.DataSourcePool.getPooledConnection(DataSourcePool.java:757)<br/>at com.avaje.ebean.server.lib.sql.DataSourcePool.getConnection(DataSourcePool.java:745)<br/>at com.avaje.ebean.server.transaction.TransactionManager.createTransaction(TransactionManager.java:331)<br/>... 10 more</p><p><br/>Ebean.properties:<br/>datasource.ora.username= animation<br/>datasource.ora.password= animation<br/>datasource.ora.databaseUrl=jdbc:oracle:thin:@127.0.0.1:1521:LOCALDB<br/>datasource.ora.databaseDriver=oracle.jdbc.driver.OracleDriver<br/>datasource.ora.minConnections=1<br/>datasource.ora.maxConnections=10<br/>#datasource.ora.heartbeatsql=select count(*) from dual<br/>datasource.ora.isolationlevel=read_committed<br/>#######################zhoupeng<br/>datasource.ora.maxInactiveTimeSecs=-1<br/>datasource.ora.leakTimeMinutes=-1<br/>datasource.ora.waitTimeoutMillis=1000<br/>#datasource.ora.captureStackTrace=true<br/>#datasource.ora.autoCommit=true</p><p>Test Function </p><p>public static void main(String args []){</p><p>for(int i=0;i<15;i++){<br/>PagingList list = Ebean.find(Order.class).findPagingList(10);<br/>}<br/>}</p>
</div>
</div>

<div class="post">
<div class="rhs" style="float:right">
17 Mar&nbsp;07:00
</div>
<span>by Rob</span>
<div class="body">
<p>I was unable to reproduce your problem.</p><p>Can you provide a test case?  (see the bug).</p><p>> How to configure the JNDI of Tomcat? </p><p>Refer to ServerConfig.setDataSourceJndiName(...).  Please do not log enhancement requests for questions.</p><p>Thanks, Rob.</p>
</div>
</div>

</div>

<div class="pageactions">
</div>

<input type="hidden" name="f_forumid" value="3">
<input type="hidden" name="f_topicid" value="177">
<input type="hidden" name="f_postid" value="">

<div id="commentForm" style="display:none;">
<h4>Add Comment</h4>
<table>
<tr>
<td class="label" valign="top" style="width:8em;">Comment:</td>
<td><textarea class="wide80" id="f_body" name="f_body" rows="10" cols="30"></textarea></td>
</tr>
</table>
<div class="buttons">
</div>
</div>

</div>

<div id="newTopicForm" class="popdialog wideDialogForm">

<div id="app.comp.TopicNew">

<div id="newTopicFormMarker" style="display:none;"></div>
<h4>Create a New Topic</h4>
<table>
<tr>
<td class="label" valign="top" style="width:8em;">Title:</td>
<td><input class="txt wide90" name="nt_title" value="$paramtool.getParamIfNull('nt_title','')"></td>
</tr>
<tr>
<td class="label" valign="top">Body:</td>
<td><textarea class="wide90" name="nt_body" rows="10" cols="30">$paramtool.getParamIfNull('nt_body','')</textarea></td>
</tr>

<tr>
<td class="label"></td>
<td>
&nbsp;
</td>
</tr>

</table>


<div class="buttons">
<input type="button" class="btn" value="Save" accesskey="s" onclick="woAction('app.comp.TopicNew','doNewTopic');" >
<input type="button" class="btn" value="Cancel" accesskey="c" onclick="popdialog.hide();">
</div>

</div>
</div>

</div>
</div>
</div>
</div><!-- end of bodywrap -->

<div id="footwrap">
<div id="footmax">
<div id="foot">
<a href="/">home</a> | <a href="#top">back to top</a>
</div>
</div>
</div><!-- end of footwrap -->

<!-- layers -->
<div id="m1popxxx" class="popmenuchild">
<a href="/ebean/introduction.html">Introduction</a>
<a href="/doc/ebean-userguide.pdf">User Guide (pdf)</a>
<a href="/configure.html">Install/Configure</a>
<a href="/static/javadoc/pub/index.html">Public JavaDoc</a>
<a href="/whitepaper.html">Whitepapers</a>
</div>

<div id="m2pop" class="popmenuchild">
<a href="/forumdetail-1.html">General</a>
<a href="/forumdetail-2.html">Database Specific</a>
<a href="/forumdetail-3.html">Byte Code</a>
<a href="/forumdetail-4.html">Deployment Annotations</a>
<a href="/forumdetail-5.html">Features</a>
</div>

<div id="m3pop" class="popmenuchild">
<a href="/bug.html">Top Bugs</a>
<a href="/enh.html">Top Enhancements</a>
</div>


<div id="woResponse">woResponse</div>

</form>

<div id="woFocusDelay"></div>
</body>
</html>

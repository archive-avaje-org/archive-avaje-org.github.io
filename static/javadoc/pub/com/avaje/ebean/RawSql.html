<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_10-beta) on Mon May 10 15:22:26 NZST 2010 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
RawSql (Ebean 2.6.0 API)
</TITLE>

<META NAME="date" CONTENT="2010-05-10">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RawSql (Ebean 2.6.0 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RawSql.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/avaje/ebean/QueryListener.html" title="interface in com.avaje.ebean"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/avaje/ebean/RawSql.ColumnMapping.html" title="class in com.avaje.ebean"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/avaje/ebean/RawSql.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RawSql.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.avaje.ebean</FONT>
<BR>
Class RawSql</H2>
<PRE>
<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>com.avaje.ebean.RawSql</B>
</PRE>
<HR>
<DL>
<DT><PRE>public final class <B>RawSql</B><DT>extends <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
Used to build object graphs based on a raw SQL statement (rather than
 generated by Ebean).
 <p>
 If you don't want to build object graphs you can use <A HREF="../../../com/avaje/ebean/SqlQuery.html" title="interface in com.avaje.ebean"><CODE>SqlQuery</CODE></A> instead
 which returns <A HREF="../../../com/avaje/ebean/SqlRow.html" title="interface in com.avaje.ebean"><CODE>SqlRow</CODE></A> objects rather than entity beans.
 </p>
 <p>
 <b>Unparsed RawSql:</b> 
 </p>
 <p>
 When RawSql is created via RawSqlBuilder.unparsed(sql) then Ebean can not
 modify the SQL at all. It can't add any extra expressions into the SQL.
 </p>
 <p>
 <b>Parsed RawSql:</b>
 </p>
 <p>When RawSql is created via RawSqlBuilder.parse(sql) then 
 Ebean will parse the SQL and find places in the SQL where it can add extra where
 expressions, add extra having expressions or replace the order by clause. If you
 want to explicitly tell Ebean where these insertion points are you can place
 special strings into your SQL (${where} or ${andWhere} and ${having} or ${andHaving}).
 </p>
 <p>
 If the SQL already includes a WHERE clause put in ${andWhere} in the location you want
 Ebean to add any extra where expressions. If the SQL doesn't have a WHERE clause put ${where}
 in instead. Similarly you can put in ${having} or ${andHaving} where you want Ebean 
 put add extra having expressions.
 </p>
 <p>
 <b>Aggregates:</b>
 </p>
 <p>
 Often RawSql will be used with Aggregate functions (sum, avg, max etc).
 The follow example shows an example based on Total Order Amount - sum(d.order_qty*d.unit_price).
 </p>
 <p>
 We can use a OrderAggregate bean that has a &#064;Sql to indicate it is based on RawSql and not
 based on a real DB Table or DB View. It has some properties to hold the values for the aggregate
 functions (sum etc) and a &#064;OneToOne to Order.
 </p>
 <p>
 &nbsp;
 </p>
 <p>
 <b>Example OrderAggregate</b>
 </p>
 <pre class="code">
  ...
  // &#064;Sql indicates to that this bean
  // is based on RawSql rather than a table
 
 &#064;Entity
 &#064;Sql    
 public class OrderAggregate {
 
  &#064;OneToOne
  Order order;
      
  Double totalAmount;
  
  Double totalItems;
  
  // getters and setters
  ...
 </pre>
 <p>
 <b>Example 1:</b>
 </p>
 <pre class="code">
 String sql = &quot; select order_id, o.status, c.id, c.name, sum(d.order_qty*d.unit_price) as totalAmount&quot;
         + &quot; from o_order o&quot; 
         + &quot; join o_customer c on c.id = o.kcustomer_id &quot;
         + &quot; join o_order_detail d on d.order_id = o.id &quot; 
         + &quot; group by order_id, o.status &quot;;
 
 RawSql rawSql = 
  RawSqlBuilder.parse(sql)
      // map the sql result columns to bean properties
      .columnMapping(&quot;order_id&quot;, &quot;order.id&quot;)
      .columnMapping(&quot;o.status&quot;, &quot;order.status&quot;)
      .columnMapping(&quot;c.id&quot;, &quot;order.customer.id&quot;)
      .columnMapping(&quot;c.name&quot;,&quot;order.customer.name&quot;)
      // we don't need to map this one due to the sql column alias
      //.columnMapping(&quot;sum(d.order_qty*d.unit_price)&quot;, &quot;totalAmount&quot;)
      .create();
 
 Query&lt;OrderAggregate&gt; query = Ebean.find(OrderAggregate.class);
 query.setRawSql(rawSql)
  .where().gt(&quot;order.id&quot;, 0)
  .having().gt(&quot;totalAmount&quot;, 20);
 
 List&lt;OrderAggregate&gt; list = query.findList();
 </pre>
 
 <p>
 <b>Example 2:</b>
 </p>

 <p>
 The following example uses a FetchConfig().query() so that after the initial RawSql query is executed 
 Ebean executes a secondary query to fetch the associated order status, orderDate along
 with the customer name.
 </p>
 
 <pre class="code">
 String sql = &quot; select order_id, 'ignoreMe', sum(d.order_qty*d.unit_price) as totalAmount &quot; 
      + &quot; from o_order_detail d&quot;
      + &quot; group by order_id &quot;;
 
 RawSql rawSql = RawSqlBuilder.parse(sql)
      .columnMapping(&quot;order_id&quot;, &quot;order.id&quot;)
      .columnMappingIgnore(&quot;'ignoreMe'&quot;)
      .create();
 
 Query&lt;OrderAggregate&gt; query = Ebean.find(OrderAggregate.class);
 query.setRawSql(rawSql)
  .fetch(&quot;order&quot;, &quot;status,orderDate&quot;, new FetchConfig().query())
  .fetch(&quot;order.customer&quot;, &quot;name&quot;)
  .where().gt(&quot;order.id&quot;, 0)
  .having().gt(&quot;totalAmount&quot;,20)
  .order().desc(&quot;totalAmount&quot;)
  .setMaxRows(10);
  
 </pre>
 
 <p>
 Note that lazy loading also works with object graphs built with RawSql.
 </p>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>rbygrave</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/avaje/ebean/RawSql.ColumnMapping.html" title="class in com.avaje.ebean">RawSql.ColumnMapping</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Defines the column mapping for raw sql DB columns to bean properties.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/avaje/ebean/RawSql.Sql.html" title="class in com.avaje.ebean">RawSql.Sql</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Represents the sql part of the query.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/avaje/ebean/RawSql.ColumnMapping.html" title="class in com.avaje.ebean">RawSql.ColumnMapping</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/avaje/ebean/RawSql.html#getColumnMapping()">getColumnMapping</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the column mapping for the SQL columns to bean properties.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/avaje/ebean/RawSql.Sql.html" title="class in com.avaje.ebean">RawSql.Sql</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/avaje/ebean/RawSql.html#getSql()">getSql</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the Sql either unparsed or in parsed (broken up) form.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/avaje/ebean/RawSql.html#queryHash()">queryHash</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the hash for this query.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getSql()"><!-- --></A><H3>
getSql</H3>
<PRE>
public <A HREF="../../../com/avaje/ebean/RawSql.Sql.html" title="class in com.avaje.ebean">RawSql.Sql</A> <B>getSql</B>()</PRE>
<DL>
<DD>Return the Sql either unparsed or in parsed (broken up) form.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getColumnMapping()"><!-- --></A><H3>
getColumnMapping</H3>
<PRE>
public <A HREF="../../../com/avaje/ebean/RawSql.ColumnMapping.html" title="class in com.avaje.ebean">RawSql.ColumnMapping</A> <B>getColumnMapping</B>()</PRE>
<DL>
<DD>Return the column mapping for the SQL columns to bean properties.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="queryHash()"><!-- --></A><H3>
queryHash</H3>
<PRE>
public int <B>queryHash</B>()</PRE>
<DL>
<DD>Return the hash for this query.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/RawSql.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/avaje/ebean/QueryListener.html" title="interface in com.avaje.ebean"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/avaje/ebean/RawSql.ColumnMapping.html" title="class in com.avaje.ebean"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/avaje/ebean/RawSql.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="RawSql.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2010. All Rights Reserved.
</BODY>
</HTML>
